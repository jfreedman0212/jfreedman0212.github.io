<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>How Should You Handle Validation Rules with React Hook Form? - Josh Freedman</title><meta name=viewport content="width=device-width,initial-scale=1"><meta itemprop=name content="How Should You Handle Validation Rules with React Hook Form?"><meta itemprop=description content="Considerations for how you define your validation rules"><meta itemprop=datePublished content="2021-07-03T01:42:26-04:00"><meta itemprop=dateModified content="2021-07-03T01:42:26-04:00"><meta itemprop=wordCount content="657"><meta itemprop=keywords content="react,react-hook-form,javascript,"><meta property="og:title" content="How Should You Handle Validation Rules with React Hook Form?"><meta property="og:description" content="Considerations for how you define your validation rules"><meta property="og:type" content="article"><meta property="og:url" content="https://jfreedman0212.github.io/posts/rhf-validation/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-07-03T01:42:26-04:00"><meta property="article:modified_time" content="2021-07-03T01:42:26-04:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="How Should You Handle Validation Rules with React Hook Form?"><meta name=twitter:description content="Considerations for how you define your validation rules"><link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel=stylesheet type=text/css><link rel=stylesheet type=text/css media=screen href=https://jfreedman0212.github.io/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://jfreedman0212.github.io/css/main.css><link id=dark-scheme rel=stylesheet type=text/css href=https://jfreedman0212.github.io/css/dark.css><script src=https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js></script>
<script src=https://jfreedman0212.github.io/js/main.js></script></head><body><div class="container wrapper"><div class=header><h1 class=site-title><a href=https://jfreedman0212.github.io/>Josh Freedman</a></h1><div class=site-description><p>My personal archive for code snippets and ramblings about software and life</p><nav class="nav social"><ul class=flat><li><a href=https://github.com/jfreedman0212 title=GitHub><i data-feather=github></i></a></li><li><a href=https://twitter.com/jfreedman0212 title=Twitter><i data-feather=twitter></i></a></li></ul></nav></div><nav class=nav><ul class=flat><li><a href=/>Home</a></li><li><a href=/posts>All Posts</a></li><li><a href=/tags>Tags</a></li></ul></nav></div><div class=post><div class=post-header><div class=meta><div class=date><span class=day>03</span>
<span class=rest>Jul 2021</span></div></div><div class=matter><h1 class=title>How Should You Handle Validation Rules with React Hook Form?</h1></div></div><div class=markdown><p><a href=https://react-hook-form.com>React Hook Form</a> is a great library for managing form state
in React. Getting started with it is simple, integrating with external libraries is (mostly)
seamless, and performance optimizations are baked into the library&rsquo;s core design. Like any other
good form library, it comes with tools for validating user input. RHF provides you two choices that might seem equivalent, but have different strengths/tradeoffs.</p><h1 id=rules-api>Rules API</h1><p>The Rules API built into React Hook Form is what you&rsquo;re given by default. It lets you pass in
rules on a <strong>field level</strong>. Using it with <code>register</code> would look something like:</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span>&lt;<span style=color:#268bd2>input</span>
</span></span><span style=display:flex><span>  type<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;number&#34;</span>
</span></span><span style=display:flex><span>  {...register(&#34;age&#34;, {
</span></span><span style=display:flex><span>    required: true,
</span></span><span style=display:flex><span>    min: 0,
</span></span><span style=display:flex><span>    max: 150
</span></span><span style=display:flex><span>  })}
</span></span><span style=display:flex><span>/&gt;
</span></span></code></pre></div><p>As you probably guessed, the above input is required and must be at least 0 but no more than 150.
This method has a couple more built in options, some data transformation options, and a fallback
<code>validate</code> function/set of functions that you can define yourself.</p><h1 id=schema-validation-libraries>Schema Validation Libraries</h1><p>Schema Validation libraries typically provide tools for building &ldquo;schemas&rdquo; that validate an
object you pass to it passes all of the rules associated with the schema. Since RHF maps your
data to a JS object, you can pass that data to a schema to perform validation. There are many
libraries you can choose from for this, but I&rsquo;ll give an example of it with Yup:</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#268bd2>const</span> MySchema <span style=color:#719e07>=</span> Yup.<span style=color:#dc322f>object</span>({
</span></span><span style=display:flex><span>  age: <span style=color:#dc322f>Yup.number</span>()
</span></span><span style=display:flex><span>    .required()
</span></span><span style=display:flex><span>    .min(<span style=color:#2aa198>0</span>)
</span></span><span style=display:flex><span>    .max(<span style=color:#2aa198>150</span>)
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#586e75>// then, within a component...
</span></span></span><span style=display:flex><span><span style=color:#586e75></span><span style=color:#268bd2>const</span> methods <span style=color:#719e07>=</span> useForm({
</span></span><span style=display:flex><span>  resolver: <span style=color:#dc322f>yupResolver</span>(MySchema),
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><p>The above example is equivalent to the one using the Rules API. Depending on which library you
choose, the built in rules can be more than sufficient. But of course, they also provide tools
for building your own if you need them.</p><h1 id=which-should-you-choose>Which Should You Choose?</h1><p>While both will let you define validation rules for your form, there are some considerations to think about before coming to a decision (ordered by importance).</p><h2 id=level-of-control>Level of Control</h2><p>When using the Rules API, you define your validation rules right on the field itself. Conversely,
you define your rules at the top of the form when using a Schema Validation library.</p><p>I&rsquo;ve found that the Rules API is more flexible for scenarios with many conditional fields
because you only have to define the logic for conditional fields
once: in your JSX. For Schema Validation, you have to define the logic for that field both
in the JSX <em>and</em> in the schema itself. On the flip side, if you want to re-use a related group of fields with different validations
between the forms you use them in, Schema Validation will be more flexible. This is because the
form field definitions are separated from their rules, so you can &ldquo;inject&rdquo; whatever rules you
want into those fields for any number of re-usages.</p><p>This may change between forms in your application, so adopting both approaches based on
the requirements may be best (as opposed to choosing one for <em>all</em> forms).</p><h2 id=built-in-rules>Built In Rules</h2><p>Schema Validation libraries will typically have more rules built into them than React Hook Form&rsquo;s
Rules API will. Sure, you can always define your own rules, but then you have to write the code to validate the field,
figure out how to share this rule for other places in your app, maintain it, and make many other decisions that distract
from the feature you&rsquo;re just trying to add. Or, you could just call <code>Yup.string().email()</code> and be done with it.</p><h2 id=bundle-size>Bundle Size</h2><p>When using Schema Validation, you will pull in at least two extra packages: the package for the
schema validation library and <code>@hookform/resolvers</code> (assuming you use the pre-built ones, you
can always build you own). This will increase the size of the code being shipped (as bringing
in any packages will).</p><hr><p>As with every other decision, weigh the benefits of each approach with the tradeoffs for your
use case. The end goal of every decision is to make it as easy as possible to build and maintain.</p></div><div class=tags><ul class=flat><li><a href=/tags/react>react</a></li><li><a href=/tags/react-hook-form>react-hook-form</a></li><li><a href=/tags/javascript>javascript</a></li></ul></div></div></div><div class="footer wrapper"><nav class=nav><div>2022 Â© Copyright notice</div></nav></div><script>feather.replace()</script></body></html>