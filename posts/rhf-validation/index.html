<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>How Should You Handle Form Validation with React Hook Form? - Josh Freedman</title><meta name=viewport content="width=device-width,initial-scale=1"><meta itemprop=name content="How Should You Handle Form Validation with React Hook Form?"><meta itemprop=description content="Considerations for how you define your validation rules"><meta itemprop=datePublished content="2021-07-03T01:42:26-04:00"><meta itemprop=dateModified content="2021-07-03T01:42:26-04:00"><meta itemprop=wordCount content="724"><meta itemprop=keywords content="react,react-hook-form,javascript,"><meta property="og:title" content="How Should You Handle Form Validation with React Hook Form?"><meta property="og:description" content="Considerations for how you define your validation rules"><meta property="og:type" content="article"><meta property="og:url" content="https://freedman.dev/posts/rhf-validation/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-07-03T01:42:26-04:00"><meta property="article:modified_time" content="2021-07-03T01:42:26-04:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="How Should You Handle Form Validation with React Hook Form?"><meta name=twitter:description content="Considerations for how you define your validation rules"><link href="https://fonts.googleapis.com/css?family=Playfair+Display:700" rel=stylesheet type=text/css><link rel=stylesheet type=text/css media=screen href=https://freedman.dev/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://freedman.dev/css/main.css><link id=dark-scheme rel=stylesheet type=text/css href=https://freedman.dev/css/dark.css><script src=https://freedman.dev/js/feather.min.js></script><script src=https://freedman.dev/js/main.js></script></head><body><div class="container wrapper"><div class=header><h1 class=site-title><a href=https://freedman.dev/>Josh Freedman</a></h1><div class=site-description><p>My personal archive for code snippets and ramblings about software and life</p><nav class="nav social"><ul class=flat><li><a href=https://github.com/jfreedman0212 title=GitHub><i data-feather=github></i></a></li></ul></nav></div><nav class=nav><ul class=flat><li><a href=/>Home</a></li><li><a href=/posts>All Posts</a></li><li><a href=/tags>Tags</a></li></ul></nav></div><div class=post><div class=post-header><div class=meta><div class=date><span class=day>03</span>
<span class=rest>Jul 2021</span></div></div><div class=matter><h1 class=title>How Should You Handle Form Validation with React Hook Form?</h1></div></div><div class=markdown><p><a href=https://react-hook-form.com>React Hook Form</a> is a great library for managing form state
in React. Getting started with it is simple, integrating with external libraries is (mostly)
seamless, and performance optimizations are baked into the library&rsquo;s core design. However, I want
to talk about validation in RHF.</p><p>In RHF, there are two main ways you define validation rules:</p><ul><li>Through passing a <code>rules</code> object to the individual fields (using the <code>register</code> or
<code>Controller</code> APIs)</li><li>Using a schema validation library like <a href=https://github.com/jquense/yup>Yup</a>
or <a href=https://github.com/colinhacks/zod>Zod</a> at the root of the form</li></ul><p>There isn&rsquo;t anything inherently wrong with either of these options, but both approaches
are not suitable for all use cases, and there are tradeoffs involved in each decision.</p><h1 id=rules-api>Rules API</h1><p>The Rules API built into React Hook Form is what you&rsquo;re given by default. It lets you pass in
rules on a <strong>field level</strong>. Using it with <code>register</code> would look something like:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx>&lt;<span style=color:#268bd2>input</span>
  type<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;number&#34;</span>
  {...register(&#34;age&#34;, { required: true, min: 0, max: 150 })}
/&gt;
</code></pre></div><p>As you probably guessed, the above input is required and must be at least 0 but no more than 150.
This method has a couple more built in options, some data transformation options, and a fallback
<code>validate</code> function/set of functions that you can define yourself.</p><h1 id=schema-validation-libraries>Schema Validation Libraries</h1><p>Schema Validation libraries typically provide tools for building &ldquo;schemas&rdquo; that validate an
object you pass to it passes all of the rules associated with the schema. Since RHF maps your
data to a JS object, you can pass that data to a schema to perform validation. There are many
libraries you can choose from for this, but I&rsquo;ll give an example of it with Yup:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=color:#268bd2>const</span> MySchema <span style=color:#719e07>=</span> Yup.<span style=color:#dc322f>object</span>({
  age: <span style=color:#dc322f>Yup.number</span>().required().min(<span style=color:#2aa198>0</span>).max(<span style=color:#2aa198>150</span>),
});

<span style=color:#586e75>// then, within a component...
</span><span style=color:#586e75></span><span style=color:#268bd2>const</span> methods <span style=color:#719e07>=</span> useForm({
  resolver: <span style=color:#dc322f>yupResolver</span>(MySchema),
});
</code></pre></div><p>The above is example is equivalent to the one using the Rules API. Depending on which library you
choose, the built in rules can be more than sufficient. But of course, they also provide tools
for building your own if you need them.</p><h1 id=which-should-you-choose>Which Should You Choose?</h1><p>While both will let you define validation rules for your form, there are some questions you should
consider before making your decision.</p><h2 id=what-role-does-bundle-size-play>What Role Does Bundle Size Play?</h2><p>When using Schema Validation, you will pull in at least two extra packages: the package for the
schema validation library and <code>@hookform/resolvers</code> (assuming you use the pre-built ones, you
can always build you own). This may be a problem for you, or the extra KiBs in your bundle are
worth it due to the benefits of using such a library.</p><h2 id=what-level-should-the-rules-be-defined-at>What Level Should the Rules Be Defined At?</h2><p>Schema Validation forces you to define your rules up front <em>and then</em> your actual fields, whereas
the Rules API is on a per-field basis. I&rsquo;ve found that the Rules API is more flexible for scenarios
with many conditional fields because you only have to define the logic for conditional fields
once: in your JSX. For Schema Validation, you have to define the logic for that field both
in the JSX <em>and</em> in the schema itself.</p><p>On the flip side, if you want to re-use a related group of fields with different validations
between the forms you use them in, Schema Validation will be more flexible. This is because the
form field definitions are separated from their rules, so you can &ldquo;inject&rdquo; whatever rules you
want into those fields for any number of re-usages.</p><h2 id=what-is-convenient-for-your-use-case>What is Convenient For Your Use Case?</h2><p>Schema Validation libraries will typically have more rules built into them than React Hook Form&rsquo;s
Rules API will. Sure, you can always define your own rules, but that comes with its own mental
overhead, especially when trying to build a complex feature. You have a lot on your mind, and
trying to build a &ldquo;is date in the past&rdquo; rule, name it, and make it shareable to all of your other
forms doesn&rsquo;t reduce complexity.</p><hr><p>While it may be tempting to choose one over the other for consistency&rsquo;s sake, I believe it is
better to choose whatever solves your current problem the best. So, use a mix of the two in your
app. I&rsquo;d rather learn the two approaches but have an easier time modifying a form than
try to wade through a hacky usage of a tool that was forced to do something it wasn&rsquo;t designed
to do.</p></div><div class=tags><ul class=flat><li><a href=/tags/react>react</a></li><li><a href=/tags/react-hook-form>react-hook-form</a></li><li><a href=/tags/javascript>javascript</a></li></ul></div></div></div><div class="footer wrapper"><nav class=nav><div>2021 <a href=https://github.com/knadh/hugo-ink>Ink</a> theme on <a href=https://gohugo.io>Hugo</a></div></nav></div><script>feather.replace()</script></body></html>